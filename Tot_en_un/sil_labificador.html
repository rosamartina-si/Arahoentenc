<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Separador de S√≠l¬∑labes - Catal√†</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #34495e;
        }
        
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s;
            min-height: 100px;
            resize: vertical;
        }
        
        textarea:focus {
            outline: none;
            border-color: #3498db;
        }
        
        button {
            background-color: #3498db;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .resultat {
            margin-top: 20px;
            padding: 15px;
            background-color: #ecf0f1;
            border-radius: 5px;
            border-left: 4px solid #3498db;
            font-size: 18px;
            line-height: 1.4;
        }
        
        .resultat h3 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        #text-silabes {
            margin: 0;
            padding: 0;
        }
        
        .info {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî† Separador de S√≠l¬∑labes - Catal√†</h1>
        
        <div class="input-group">
            <label for="text">Introdueix el text:</label>
            <textarea id="text" placeholder="Exemple: La casa nova, el llibre interessant..." autofocus>casa nova paraula llibre butlla blau brau clau carro passat exemple neboda infernal ra√Øm ta√ºll arg√ºir arg√ºeix arg√º√≠ guant quota guaita po√®ma ve√≠ pa√≠s a√Øllar co√Øncidir paella M√†rius S√≠rius</textarea>
        </div>
        
        <button onclick="separarSilabes()">Separar S√≠l¬∑labes</button>
        
        <div id="resultat" class="resultat" style="display: none;">
            <h3>Resultat:</h3>
            <div id="text-silabes"></div>
        </div>
        
        <div class="info">
            <strong>üìù Regles de separaci√≥:</strong>
            <ul>
                <li><strong>l¬∑l</strong>: separaci√≥ entre les dues eles ‚Üí l-l</li>
                <li><strong>Consonant entre vocals</strong>: separaci√≥ abans de la consonant ‚Üí no-va</li>
                <li><strong>ll, ny, kh, bl, br, cl, cr, dr, fl, fr, gl, gr, pl, pr, tr</strong>: separaci√≥ a l'esquerra enmig de paraula</li>
                <li><strong>Dues o m√©s consonants entre vocals</strong>: separaci√≥ a l'esquerra de l'√∫ltima consonant</li>
                <li><strong>g,q + u + vocal</strong>: inseparables</li>
                <li><strong>vocal √†tona + vocal accentuada</strong>: separaci√≥ a l'esquerra de la vocal accentuada</li>
                <li><strong>vocal accentuada + vocal √†tona</strong>: separaci√≥ a la dreta de la vocal accentuada</li>
                <li><strong>arg√ºir i derivats</strong>: separacions espec√≠fiques per a √ºe, √ºi, √º√≠</li>
                <li><strong>consonant + i/u + a/e/o + (final/consonant)</strong>: separaci√≥ entre i/u i la vocal</li>
                <li><strong>a/e/o + a/e/o</strong>: separaci√≥ entre les vocals</li>
                <li><strong>vocal + i/u + vocal</strong>: separaci√≥ abans de i/u</li>
                <li><strong>vocal + um + (final/s)</strong>: separaci√≥ entre vocal i um</li>
                <li><strong>M√†rius/S√≠rius</strong>: separaci√≥ espec√≠fica ‚Üí M√†ri-us/S√≠ri-us</li>
            </ul>
        </div>
    </div>

    <script>
        function separarSilabes() {
            const text = document.getElementById('text').value;
            const resultatDiv = document.getElementById('resultat');
            const container = document.getElementById('text-silabes');
            
            if (!text.trim()) {
                container.textContent = 'Si us plau, introdueix un text';
                resultatDiv.style.display = 'block';
                return;
            }

            // Processar cada paraula per separat
            const paraules = text.split(/(\s+)/);
            let resultatFinal = '';
            
            for (let paraula of paraules) {
                // Si s√≥n espais, mantenir nom√©s un espai simple
                if (paraula.match(/^\s+$/)) {
                    if (resultatFinal.length > 0 && !resultatFinal.endsWith(' ')) {
                        resultatFinal += ' ';
                    }
                    continue;
                }
                
                let paraulaProcessada = paraula;
                let canvi;
                
                // REGLA ESPECIAL: arg√ºir i derivats - APLICAR PRIMER!
                paraulaProcessada = paraulaProcessada.replace(/arg√º(eix|i|√≠)/gi, 'arg√º-$1');
                //paraulaProcessada = paraulaProcessada.replace(/argu(√Ø)/gi, 'argu-$1');

                // REGLA excepci√≥: M√†rius ‚Üí M√†ri-us. S√≠rius ‚Üí S√≠ri-us (APLICAR ABANS)
                paraulaProcessada = paraulaProcessada.replace(/(M√†ri|S√≠ri)us($)/gi, '$1-us$2');
                
                // REGLA 1: l¬∑l ‚Üí l-l (separaci√≥ entre les dues eles)
                paraulaProcessada = paraulaProcessada.replace(/l¬∑l/gi, 'l-l');
                
                // REGLA 2: Una consonant entre vocals ‚Üí separaci√≥ abans de la consonant
                do {
                    canvi = false;
                    const novaParaula = paraulaProcessada.replace(/([aeiou√†√®√©√≠√Ø√≤√≥√∫√º])([bcdfghjklmnpqrstvwxyz√ß])([aeiou√†√®√©√≠√Ø√≤√≥√∫√º])/gi, function(match, vocal1, consonant, vocal2) {
                        if (!match.includes('-')) {
                            canvi = true;
                            return vocal1 + '-' + consonant + vocal2;
                        }
                        return match;
                    });
                    if (canvi) {
                        paraulaProcessada = novaParaula;
                    }
                } while (canvi);

                // REGLA 3: D√≠grafs i grups conson√†ntics
                do {
                    canvi = false;
                    const novaParaula = paraulaProcessada.replace(/([a-z√ß√†√®√©√≠√Ø√≤√≥√∫√º])(ll|ny|kh|bl|br|cl|cr|dr|fl|fr|gl|gr|pl|pr|tr)([aeiou√†√®√©√≠√Ø√≤√≥√∫√º])/gi, function(match, vocal1, consonant, vocal2) {
                        if (!match.includes('-')) {
                            canvi = true;
                            return vocal1 + '-' + consonant + vocal2;
                        }
                        return match;
                    });
                    if (canvi) {
                        paraulaProcessada = novaParaula;
                    }
                } while (canvi);

                // REGLA 4: Dues o m√©s consonants entre vocals
                do {
                    canvi = false;
                    const novaParaula = paraulaProcessada.replace(/([aeiou√†√®√©√≠√Ø√≤√≥√∫√º])([bcdfghjklmnpqrstvwxyz√ß]{2,})([aeiou√†√®√©√≠√Ø√≤√≥√∫√º])/gi, function(match, vocal1, consonants, vocal2) {
                        if (!match.includes('-')) {
                            canvi = true;
                            const consonantsSenseUltima = consonants.substring(0, consonants.length - 1);
                            const ultimaConsonant = consonants.substring(consonants.length - 1);
                            return vocal1 + consonantsSenseUltima + '-' + ultimaConsonant + vocal2;
                        }
                        return match;
                    });
                    if (canvi) {
                        paraulaProcessada = novaParaula;
                    }
                } while (canvi);

                
                // REGLA 5: g,q + u + vocal excepte √Ø ‚Üí inseparables (marcar amb asteriscs)
                paraulaProcessada = paraulaProcessada.replace(/([gq])u([aeiou√†√®√©√≠√≤√≥√∫√º])/gi, '$1*u*$2');


                // REGLA 6: d√®ieu - vocal + iu + vocal + iu
                do {
                    canvi = false;
                    const novaParaula = paraulaProcessada.replace(/([a√†e√©√®i√≠o√≤√≥u√∫])([iu])([aeiou])([iu])/gi, function(match, v1, iu1, v2, iu2) {
                        if (!match.includes('-')) {
                            canvi = true;
                            return v1 + '-' + iu1 + '*' + v2 + iu2;
                        }
                        return match;
                    });
                    if (canvi) {
                        paraulaProcessada = novaParaula;
                    }
                } while (canvi);



                // REGLA 7: cauen - vocal + i/u + vocal
                do {
                    canvi = false;
                    const novaParaula = paraulaProcessada.replace(/([aeiou√†√®√©√≠√≤√≥√∫])([iu])([aeiou√†√®√©√≠√Ø√≤√≥√∫√º])/gi, function(match, v1, iu, v2) {
                        if (!match.includes('-')) {
                            canvi = true;
                            return v1 + '-' + iu + '*' + v2;
                        }
                        return match;
                    });
                    if (canvi) {
                        paraulaProcessada = novaParaula;
                    }
                } while (canvi);


                // REGLA 8: pa√≠s - vocal √†tona + vocal accentuada
                do {
                    canvi = false;
                    const novaParaula = paraulaProcessada.replace(/([aeiou])([√†√®√©√≠√≤√≥√∫√Ø√º])/gi, function(match, v1, v2) {
                        if (!match.includes('-')) {
                            canvi = true;
                            return v1 + '-' + v2;
                        }
                        return match;
                    });
                    if (canvi) {
                        paraulaProcessada = novaParaula;
                    }
                } while (canvi);

                // REGLA 9: Maria - consonant + iu + aeo
                do {
                    canvi = false;
                    const novaParaula = paraulaProcessada.replace(/([bcdfgjklmnpqrstvwxyz√ß])([iu])([aeo])/gi, function(match, c, iu, v) {
                        if (!match.includes('-')) {
                            canvi = true;
                            return c + iu + '-' + v;
                        }
                        return match;
                    });
                    if (canvi) {
                        paraulaProcessada = novaParaula;
                    }
                } while (canvi);

                // REGLA 10: teatre - a/e/o + a/e/o
                do {
                    canvi = false;
                    const novaParaula = paraulaProcessada.replace(/([aeo√†√®√©√≤√≥])([aeo√†√®√©√≤√≥])/gi, function(match, v1, v2) {
                        if (!match.includes('-')) {
                            canvi = true;
                            return v1 + '-' + v2;
                        }
                        return match;
                    });
                    if (canvi) {
                        paraulaProcessada = novaParaula;
                    }
                } while (canvi);

                // REGLA 11: vocal accentuada + vocal √†tona
                do {
                    canvi = false;
                    const novaParaula = paraulaProcessada.replace(/([√†√®√©√≠√≤√≥√∫])([aeiou])/gi, function(match, v1, v2) {
                        if (!match.includes('-')) {
                            canvi = true;
                            return v1 + '-' + v2;
                        }
                        return match;
                    });
                    if (canvi) {
                        paraulaProcessada = novaParaula;
                    }
                } while (canvi);

                // REGLA 12: aqu√†rium - vocal + um final
                do {
                    canvi = false;
                    const novaParaula = paraulaProcessada.replace(/([aeiou])um($|s$)/gi, function(match, v, final) {
                        if (!match.includes('-')) {
                            canvi = true;
                            return v + '-um' + final;
                        }
                        return match;
                    });
                    if (canvi) {
                        paraulaProcessada = novaParaula;
                    }
                } while (canvi);
                
                // Suprimir els asteriscs
                paraulaProcessada = paraulaProcessada.replace(/\*/gi, '');
                
                // Netejar guions duplicats o al principi
                paraulaProcessada = paraulaProcessada.replace(/--+/g, '-');
                paraulaProcessada = paraulaProcessada.replace(/^-/, '');
                
                if (resultatFinal.length > 0 && !resultatFinal.endsWith(' ')) {
                    resultatFinal += ' ';
                }
                resultatFinal += paraulaProcessada;
            }
            
            // Netejar espais en blanc addicionals
            resultatFinal = resultatFinal.replace(/\s+/g, ' ').trim();
            
            container.textContent = resultatFinal;
            resultatDiv.style.display = 'block';
        }

        // Assegurar que el bot√≥ funcioni
        document.addEventListener('DOMContentLoaded', function() {
            const button = document.querySelector('button');
            button.addEventListener('click', separarSilabes);
        });

        // Permetre usar la tecla Enter (amb Ctrl)
        document.getElementById('text').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                separarSilabes();
            }
        });

        // Executar autom√†ticament al carregar
        window.addEventListener('load', function() {
            setTimeout(separarSilabes, 100);
        });
    </script>
</body>
</html>
