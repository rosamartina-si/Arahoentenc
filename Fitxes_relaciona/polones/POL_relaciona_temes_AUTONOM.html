<!DOCTYPE html>
<html lang="ca">
<head>
<meta charset="UTF-8" />
<title>Relaciona: Jocs en polon√®s</title>
<style>
body {
  font-family: 'Georgia', serif;
  max-width: 900px;
  margin: auto;
  padding: 20px;
  background: #fff;
  color: #000;
}
h1 {
  color: #003366;
}
#tema-selector {
  margin-bottom: 20px;
}
#tema-selector select {
  padding: 6px;
  font-size: 14px;
}
.match-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2em;
  padding: 20px 0;
  min-height: 400px;
  position: relative;
}
.match-lines {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}
.col {
  display: flex;
  flex-direction: column;
}
.item {
  padding: 10px;
  border: 1px solid #ccc;
  margin-bottom: 6px;
  cursor: pointer;
  user-select: none;
  transition: background-color 0.2s ease, border 0.2s ease;
  background-color: #fff;
}
.selected {
  background-color: #d0ebff;
}
.matched {
  border: 2px solid green;
  background-color: #e8fbe8;
}
.fixed-pol {
  border: 2px solid orange;
  background-color: #fffacc !important;
}
.fixed-cat {
  border: 2px solid orange;
  background-color: #fffacc !important;
  pointer-events: none; /* Traduccions no clicables un cop resoltes */
}
.incorrect-pol, .incorrect-cat {
  border: 2px solid red;
  background-color: #ffeaea !important;
}
#score {
  font-weight: bold;
  margin-top: 1em;
  color: #003366;
}
#controls {
  margin-top: 2em;
}
#controls button {
  margin: 5px 5px 15px 0;
  padding: 6px 12px;
  font-size: 14px;
  background-color: #003366;
  color: #fff;
  border: none;
  cursor: pointer;
}
#controls button:hover {
  background-color: #005599;
}
.nota {
  margin-top: 30px;
  padding: 12px;
  background: #f4f8ff;
  border-left: 4px solid #003366;
  font-size: 14px;
}
</style>
</head>
<body>

<h1>Relaciona en polon√®s</h1>
<div id="tema-selector">
  <label for="tema">Tria un tema: </label>
  <select id="tema">
    <option value="cortesia">Frases de cortesia</option>
    <option value="colors">Colors</option>
    <option value="fruites">Fruites</option>
    <option value="fruites_poloneses">Fruites poloneses</option>
    <option value="gelats">Gustos de gelat</option>
    <option value="bistro_dolc">Esmorzar dol√ß - Gdansk</option>
    <option value="bistro_salat">Esmorzar salat - Gdansk</option>
    <option value="apats_serveis">√Äpats i serveis</option>
    <option value="apats_detalls">Indicacions, ingredients i utensilis</option>
    <option value="lavabo">Lavabo i serveis</option>
    <option value="menjar">Menjar</option>
    <option value="hotel">Hotel</option>
    <option value="transport">Transport</option>
    <option value="vies">Noms de vies i espais p√∫blics</option>
    <option value="barca">Barca</option>
    <option value="retols_ciutat">R√®tols i serveis urbans</option>
    <option value="indicacions">Indicacions i direccions</option>
    <option value="numeros">N√∫meros (1-10)</option>
    <option value="hores">Hores i temps</option>
    <option value="dies">Dies</option>
    <option value="dies_dificils">Ahir dimarts vespre</option>
    <option value="pagaments">Pagaments i compres</option>
    <option value="verb_ser">Verb ser (byƒá)</option>
    <option value="pronoms_personals">Pronoms personals</option>
    <option value="demostratius">Demostratius</option>
    <option value="possessius">Possessius</option> 
    <option value="preposicions">Preposicions</option>
    
  </select>
  <button onclick="canviaTema()">‚úÖ Carrega tema</button>
</div>

<div class="match-container">
  <svg class="match-lines"></svg>
  <div class="col" id="polones"></div>
  <div class="col" id="catala"></div>
</div>

<div id="score">Encerts: 0 / 10</div>
<div id="controls">
  <button onclick="novaRonda()">üîÅ Torna a comen√ßar</button>
</div>

<div class="nota">
  Verd = encert a la primera | Groc = encert despr√©s d'errors (es repetir√† a la seg√ºent ronda) | Vermell = error.
</div>

<script>
const TOTAL_PER_RONDA = 10;

const TEMES = {
  colors: [
    {"id":1,"pol":"bia≈Çy","cat":"blanc"},
    {"id":2,"pol":"czarny","cat":"negre"},
    {"id":3,"pol":"czerwony","cat":"vermell"},
    {"id":4,"pol":"niebieski","cat":"blau"},
    {"id":5,"pol":"zielony","cat":"verd"},
    {"id":6,"pol":"≈º√≥≈Çty","cat":"groc"},
    {"id":7,"pol":"pomara≈Ñczowy","cat":"taronja"},
    {"id":8,"pol":"r√≥≈ºowy","cat":"rosa"},
    {"id":9,"pol":"fioletowy","cat":"lila"},
    {"id":10,"pol":"brƒÖzowy","cat":"marr√≥"},
    {"id":11,"pol":"szary","cat":"gris"},
    {"id":12,"pol":"be≈ºowy","cat":"beix"}
  ],
  fruites: [
    {"id":1,"pol":"jab≈Çko","cat":"poma"},
    {"id":2,"pol":"gruszka","cat":"pera"},
    {"id":3,"pol":"banan","cat":"pl√†tan"},
    {"id":4,"pol":"pomara≈Ñcza","cat":"taronja"},
    {"id":5,"pol":"cytryna","cat":"llimona"},
    {"id":6,"pol":"winogrono","cat":"ra√Øm"},
    {"id":7,"pol":"truskawka","cat":"maduixa"},
    {"id":8,"pol":"wi≈õnia","cat":"cirera"},
    {"id":9,"pol":"malina","cat":"gerd"},
    {"id":10,"pol":"arbuz","cat":"s√≠ndria"},
    {"id":11,"pol":"ananas","cat":"pinya"},
    {"id":12,"pol":"brzoskwinia","cat":"pr√©ssec"}
  ],
fruites_poloneses: [
    {"id":1,"pol":"jab≈Çko","cat":"poma"},
    {"id":2,"pol":"gruszka","cat":"pera"},
    {"id":3,"pol":"≈õliwka","cat":"pruna"},
    {"id":4,"pol":"porzeczka","cat":"grosella - forma entre nabiu i ra√Øm, com mini ra√Øms - n'hi ha de vermelles i de negres"},
    {"id":5,"pol":"≈ºurawina","cat":"nabiu vermell"},
    {"id":6,"pol":"bor√≥wka","cat":"nabiu"},
    {"id":7,"pol":"truskawka","cat":"maduixa"},
    {"id":8,"pol":"poziomka","cat":"maduixa de bosc"},
    {"id":9,"pol":"malina","cat":"gerd"},
    {"id":10,"pol":"je≈ºyna","cat":"m√≥ra"}
],
  gelats: [
    {"id":1,"pol":"waniliowy","cat":"vainilla"},
    {"id":2,"pol":"czekoladowy","cat":"xocolata"},
    {"id":3,"pol":"truskawkowy","cat":"maduixa"},
    {"id":4,"pol":"≈õmietankowy","cat":"nata"},
    {"id":5,"pol":"malinowy","cat":"gerd"},
    {"id":6,"pol":"cytrynowy","cat":"llimona"},
    {"id":7,"pol":"mango","cat":"mango"},
    {"id":8,"pol":"kawowy","cat":"caf√®"},
    {"id":9,"pol":"orzech w≈Çoski","cat":"nou"},
    {"id":10,"pol":"orzech laskowy","cat":"avellana"},
    {"id":11,"pol":"solony karmel","cat":"caramel salat"},
    {"id":12,"pol":"jagodowy","cat":"fruites del bosc"},
    {"id":13,"pol":"bor√≥wkowy","cat":"nabiu"},
    {"id":14,"pol":"porzeczkowy","cat":"grosella - forma entre nabiu i ra√Øm, com mini ra√Øms"},
    {"id":15,"pol":"pistacjowy","cat":"festuc"},
    {"id":16,"pol":"kokosowy","cat":"coco"},
    {"id":17,"pol":"miƒôtowy","cat":"menta"},
    {"id":18,"pol":"tiramisu","cat":"tiramisu"},
    {"id":19,"pol":"jogurtowy","cat":"iogurt"},
    {"id":20,"pol":"≈õliwkowy","cat":"pruna"}
],

  numeros: [
    {"id":1,"pol":"jeden","cat":"1"},
    {"id":2,"pol":"dwa","cat":"2"},
    {"id":3,"pol":"trzy","cat":"3"},
    {"id":4,"pol":"cztery","cat":"4"},
    {"id":5,"pol":"piƒôƒá","cat":"5"},
    {"id":6,"pol":"sze≈õƒá","cat":"6"},
    {"id":7,"pol":"siedem","cat":"7"},
    {"id":8,"pol":"osiem","cat":"8"},
    {"id":9,"pol":"dziewiƒôƒá","cat":"9"},
    {"id":10,"pol":"dziesiƒôƒá","cat":"10"}
  ],
cortesia: [
    {"id":1,"pol":"tak","cat":"s√≠"},
    {"id":2,"pol":"nie","cat":"no"},
    {"id":3,"pol":"dziƒôkujƒô","cat":"gr√†cies"},
    {"id": 12, "pol": "Nie ma problemu", "cat": "De res"},
    {"id":4,"pol":"proszƒô","cat":"si us plau"},
    {"id":5,"pol":"przepraszam","cat":"perd√≥"},
    {"id":6,"pol":"dzie≈Ñ dobry","cat":"bon dia (fins a migdia)"},
    {"id":7,"pol":"dobry wiecz√≥r","cat":"bona tarda / bon vespre (a partir de les 16-17 h)"},
    {"id":8,"pol":"dobranoc","cat":"bona nit (quan ens acomiadem per anar a dormir)"},
    {"id":9,"pol":"cze≈õƒá","cat":"hola (informal)"},
    {"id":10,"pol":"do widzenia","cat":"ad√©u (formal)"},
    {"id":11,"pol":"pa","cat":"ad√©u (informal, com ‚Äòadeu-siau‚Äô)"}
],

  transport: [
  {"id":1,"pol":"Lotnisko","cat":"Aeroport"},
  {"id":2,"pol":"Samolot","cat":"Avi√≥"},
  {"id":3,"pol":"Walizka","cat":"Maleta"},
  {"id":4,"pol":"Autostrada","cat":"Autopista"},
  {"id":5,"pol":"Stacja benzynowa","cat":"Gasolinera"},
  {"id":6,"pol":"Parking","cat":"Aparcament"},
  {"id":7,"pol":"P≈Çatna droga","cat":"Peatge"},
  {"id":8,"pol":"Wypadek","cat":"Accident"},
  {"id":9,"pol":"Pas bezpiecze≈Ñstwa","cat":"Cintur√≥ de seguretat"},
  {"id":10,"pol":"Samoch√≥d","cat":"Cotxe"}
  ],
  vies: [
    {"id":1,"pol":"ulica","cat":"carrer"},
    {"id":2,"pol":"plac","cat":"pla√ßa"},
    {"id":3,"pol":"aleja","cat":"avinguda"},
    {"id":4,"pol":"rondo","cat":"rotonda"},
    {"id":5,"pol":"droga","cat":"cam√≠ / carretera"},
    {"id":6,"pol":"≈õcie≈ºka","cat":"sender / caminet"},
    {"id":7,"pol":"most","cat":"pont"},
    {"id":8,"pol":"rynek","cat":"pla√ßa major / pla√ßa del mercat"},
    {"id":9,"pol":"bulwar","cat":"bulevard"},
    {"id":10,"pol":"autostrada","cat":"autopista"},
    {"id":11,"pol":"uliczka","cat":"carrer√≥"},
    {"id":12,"pol":"pas","cat":"passatge"},
    {"id":13,"pol":"droga ekspresowa","cat":"carretera r√†pida"},
    {"id":14,"pol":"obwodnica","cat":"variant / circumval¬∑laci√≥"},
    {"id":15,"pol":"parking","cat":"aparcament"},
    {"id":16,"pol":"zjazd","cat":"sortida (d‚Äôautopista)"},
    {"id":17,"pol":"wjazd","cat":"entrada (d‚Äôautopista)"},
    {"id":18,"pol":"przej≈õcie dla pieszych","cat":"pas de vianants"},
    {"id":19,"pol":"skrzy≈ºowanie","cat":"cru√Ølla"},
    {"id":20,"pol":"autostrada p≈Çatna","cat":"autopista de peatge"},
    {"id":21,"pol":"stacja benzynowa","cat":"gasolinera"},
    {"id":22,"pol":"droga gruntowa","cat":"cam√≠ de terra"}
],

  barca: [
  {"id":1,"pol":"≈Å√≥d≈∫","cat":"Barca"},
  {"id":2,"pol":"Rzeka","cat":"Riu"},
  {"id":3,"pol":"Jezioro","cat":"Llac"},
  {"id":4,"pol":"Kotwica","cat":"√Äncora"},
  {"id":5,"pol":"Kamizelka ratunkowa","cat":"Armilla salvavides"},
  {"id":6,"pol":"Mapa","cat":"Mapa"},
  {"id":7,"pol":"Przysta≈Ñ","cat":"Port"},
  {"id":8,"pol":"Silnik","cat":"Motor"},
  {"id":9,"pol":"Benzyna","cat":"Gasolina"},
  {"id":10,"pol":"P≈ÇynƒÖƒá","cat":"Navegar"}
  ],
  menjar: [
  {"id":1,"pol":"Woda","cat":"Aigua"},
  {"id":2,"pol":"Chleb","cat":"Pa"},
  {"id":3,"pol":"Piwo","cat":"Cervesa"},
  {"id":4,"pol":"Wino","cat":"Vi"},
  {"id":5,"pol":"≈öniadanie","cat":"Esmorzar"},
  {"id":6,"pol":"Obiad","cat":"Dinar"},
  {"id":7,"pol":"Kolacja","cat":"Sopar"},
  {"id":8,"pol":"Ryba","cat":"Peix"},
  {"id":9,"pol":"Miƒôso","cat":"Carn"},
  {"id":10,"pol":"Sa≈Çatka","cat":"Amanida"},
  {"id":11,"pol":"Deser","cat":"Postres"},
  {"id":12,"pol":"Kawa","cat":"Caf√®"},
  {"id":13,"pol":"Herbata","cat":"Te"}
],
  lavabo: [
    {"id":1,"pol":"toaleta","cat":"lavabo (al restaurant)"},
    {"id":2,"pol":"≈Çazienka","cat":"lavabo (a casa)"},
    {"id":3,"pol":"umywalka","cat":"pica / aig√ºera"},
    {"id":4,"pol":"muszla klozetowa","cat":"v√†ter"},
    {"id":5,"pol":"kabina prysznicowa","cat":"dutxa"},
    {"id":6,"pol":"papier toaletowy","cat":"paper higi√®nic"},
    {"id":7,"pol":"rƒôcznik","cat":"tovallola"},
    {"id":8,"pol":"myd≈Ço","cat":"sab√≥"},
    {"id":9,"pol":"gdzie jest toaleta?","cat":"on √©s el lavabo?"},
    {"id":10,"pol":"damska","cat":"dones"},
    {"id":11,"pol":"mƒôska","cat":"homes"},
    {"id":12,"pol":"wolne","cat":"lliure"},
    {"id":13,"pol":"zajƒôte","cat":"ocupat"},
  {"id": 14, "pol": "Na lewo", "cat": "A l'esquerra"},
  {"id": 15, "pol": "Na prawo", "cat": "A la dreta"},
  {"id": 16, "pol": "Prosto", "cat": "Al fons"},
  {"id": 17, "pol": "Toaleta zamkniƒôta", "cat": "Lavabo tancat"},
  {"id": 18, "pol": "Tylko dla klient√≥w", "cat": "Nom√©s per a clients"},
    {"id":19,"pol":"op≈Çata za toaletƒô","cat":"pagament pel lavabo"}
],

  hotel: [
    {"id":1,"pol":"hotel","cat":"hotel"},
    {"id":2,"pol":"recepcja","cat":"recepci√≥"},
    {"id":3,"pol":"pok√≥j","cat":"habitaci√≥"},
    {"id":4,"pol":"pok√≥j jednoosobowy","cat":"habitaci√≥ individual"},
    {"id":5,"pol":"pok√≥j dwuosobowy","cat":"habitaci√≥ doble"},
    {"id":6,"pol":"≈Ç√≥≈ºko","cat":"llit"},
    {"id":7,"pol":"≈Çazienka","cat":"bany"},
    {"id":8,"pol":"klucz","cat":"clau"},
    {"id":9,"pol":"karta","cat":"targeta (d‚Äôacc√©s)"},
    {"id":10,"pol":"winda","cat":"ascensor"},
    {"id":11,"pol":"piƒôtro","cat":"planta / pis"},
    {"id":12,"pol":"recepcjonista","cat":"recepcionista (home)"},
    {"id":13,"pol":"recepcjonistka","cat":"recepcionista (dona)"},
    {"id":14,"pol":"zameldowanie","cat":"registre d‚Äôentrada (check-in)"},
    {"id":15,"pol":"wymeldowanie","cat":"registre de sortida (check-out)"},
    {"id":16,"pol":"rezerwacja","cat":"reserva"},
    {"id":17,"pol":"≈õniadanie","cat":"esmorzar"},
    {"id":18,"pol":"restauracja hotelowa","cat":"restaurant de l‚Äôhotel"},
    {"id":19,"pol":"bar","cat":"bar"},
    {"id":20,"pol":"basen","cat":"piscina"},
    {"id":21,"pol":"si≈Çownia","cat":"gimn√†s"},
    {"id":22,"pol":"spa","cat":"spa"},
    {"id":23,"pol":"sauna","cat":"sauna"},
    {"id":24,"pol":"parking","cat":"aparcament"},
    {"id":25,"pol":"pralnia","cat":"bugaderia"},
    {"id":26,"pol":"obs≈Çuga pokoju","cat":"servei d‚Äôhabitacions"},
    {"id":27,"pol":"klimatyzacja","cat":"aire condicionat"},
    {"id":28,"pol":"sejf","cat":"caixa forta"},
    {"id":29,"pol":"wi-fi","cat":"wifi"},
    {"id":30,"pol":"has≈Ço","cat":"contrasenya"}
],
retols_ciutat: [
    {"id":1,"pol":"apteka","cat":"farm√†cia"},
    {"id":2,"pol":"muzeum","cat":"museu"},
    {"id":3,"pol":"biblioteka","cat":"biblioteca"},
    {"id":4,"pol":"sklep","cat":"botiga"},
    {"id":5,"pol":"sklep spo≈ºywczy","cat":"botiga d‚Äôalimentaci√≥"},
    {"id":6,"pol":"supermarket","cat":"supermercat"},
    {"id":7,"pol":"centrum handlowe","cat":"centre comercial"},
    {"id":8,"pol":"poczta","cat":"oficina de correus"},
    {"id":9,"pol":"bank","cat":"banc"},
    {"id":10,"pol":"bankomat","cat":"caixer autom√†tic"},
    {"id":11,"pol":"informacja turystyczna","cat":"informaci√≥ tur√≠stica"},
    {"id":12,"pol":"wej≈õcie","cat":"entrada"},
    {"id":13,"pol":"wyj≈õcie","cat":"sortida"},
    {"id":14,"pol":"otwarte","cat":"obert"},
    {"id":15,"pol":"zamkniƒôte","cat":"tancat"},
    {"id":16,"pol":"czynne","cat":"obert (en funcionament)"},
    {"id":17,"pol":"przerwa","cat":"tancat temporalment / pausa"},
    {"id":18,"pol":"godziny otwarcia","cat":"horari d‚Äôobertura"},
    {"id":19,"pol":"szpital","cat":"hospital"},
    {"id":20,"pol":"przychodnia","cat":"centre m√®dic"},
    {"id":21,"pol":"apteka ca≈Çodobowa","cat":"farm√†cia 24 hores"},
    {"id":22,"pol":"apteka dy≈ºurna","cat":"farm√†cia de gu√†rdia"},
    {"id":23,"pol":"parking","cat":"aparcament"},
    {"id":24,"pol":"stacja benzynowa","cat":"gasolinera"},
    {"id":25,"pol":"dworzec","cat":"estaci√≥ (general)"},
    {"id":26,"pol":"dworzec kolejowy","cat":"estaci√≥ de tren"},
    {"id":27,"pol":"dworzec autobusowy","cat":"estaci√≥ d‚Äôautobusos"},
    {"id":28,"pol":"przystanek","cat":"parada"},
    {"id":29,"pol":"przystanek autobusowy","cat":"parada d‚Äôautob√∫s"},
    {"id":30,"pol":"przystanek tramwajowy","cat":"parada de tramvia"}
],
indicacions: [
    {"id":1,"pol":"w prawo","cat":"a la dreta"},
    {"id":2,"pol":"w lewo","cat":"a l'esquerra"},
    {"id":3,"pol":"prosto","cat":"recte"},
    {"id":4,"pol":"skrƒôƒá w prawo","cat":"gira a la dreta"},
    {"id":5,"pol":"skrƒôƒá w lewo","cat":"gira a l'esquerra"},
    {"id":6,"pol":"id≈∫ prosto","cat":"v√©s recte"},
    {"id":7,"pol":"zawr√≥ƒá","cat":"fes mitja volta"},
    {"id":8,"pol":"na rogu","cat":"a la cantonada"},
    {"id":9,"pol":"na skrzy≈ºowaniu","cat":"a la cru√Ølla"},
    {"id":10,"pol":"obok","cat":"al costat"},
    {"id":11,"pol":"naprzeciwko","cat":"enfront"},
    {"id":12,"pol":"za rogiem","cat":"darrere la cantonada"},
    {"id":13,"pol":"blisko","cat":"a prop"},
    {"id":14,"pol":"daleko","cat":"lluny"},
    {"id":15,"pol":"tu","cat":"aqu√≠"},
    {"id":16,"pol":"tam","cat":"all√†"},
    {"id":17,"pol":"id≈∫ prosto a≈º do...","cat":"v√©s recte fins a..."},
    {"id":18,"pol":"skrƒôƒá za ≈õwiat≈Çami","cat":"gira despr√©s del sem√†for"},
    {"id":19,"pol":"po lewej stronie","cat":"al costat esquerre"},
    {"id":20,"pol":"po prawej stronie","cat":"al costat dret"}
],


dies: [
  {"id":1,"pol":"Poniedzia≈Çek","cat":"Dilluns"},
  {"id":2,"pol":"Wtorek","cat":"Dimarts"},
  {"id":3,"pol":"≈öroda","cat":"Dimecres"},
  {"id":4,"pol":"Czwartek","cat":"Dijous"},
  {"id":5,"pol":"PiƒÖtek","cat":"Divendres"},
  {"id":6,"pol":"Sobota","cat":"Dissabte"},
  {"id":7,"pol":"Niedziela","cat":"Diumenge"},
  {"id":8,"pol":"Dzi≈õ","cat":"Avui"},
  {"id":9,"pol":"Jutro","cat":"Dem√†"},
  {"id":10,"pol":"Wczoraj","cat":"Ahir"},
  {"id":11,"pol":"Rano","cat":"Mat√≠"},
  {"id":12,"pol":"Wiecz√≥r","cat":"Vespre"},
  {"id":13,"pol":"Noc","cat":"Nit"}
],
  dies_dificils: [
  {"id":2,"pol":"Wtorek","cat":"Dimarts"},
  {"id":10,"pol":"Wczoraj","cat":"Ahir"},
  {"id":12,"pol":"Wiecz√≥r","cat":"Vespre"}

],
  hores: [
    {"id":1,"pol":"kt√≥ra godzina?","cat":"quina hora √©s?"},
    {"id":2,"pol":"jest pierwsza","cat":"√©s la una"},
    {"id":3,"pol":"jest druga","cat":"s√≥n les dues"},
    {"id":4,"pol":"jest trzecia","cat":"s√≥n les tres"},
    {"id":5,"pol":"jest czwarta","cat":"s√≥n les quatre"},
    {"id":6,"pol":"jest piƒÖta","cat":"s√≥n les cinc"},
    {"id":7,"pol":"jest sz√≥sta","cat":"s√≥n les sis"},
    {"id":8,"pol":"jest si√≥dma","cat":"s√≥n les set"},
    {"id":9,"pol":"jest √≥sma","cat":"s√≥n les vuit"},
    {"id":10,"pol":"jest dziewiƒÖta","cat":"s√≥n les nou"},
    {"id":11,"pol":"jest dziesiƒÖta","cat":"s√≥n les deu"},
    {"id":12,"pol":"jest jedenasta","cat":"s√≥n les onze"},
    {"id":13,"pol":"jest dwunasta","cat":"s√≥n les dotze"},
    {"id":14,"pol":"jest wp√≥≈Ç do drugiej","cat":"√©s la una i mitja (literal: mitja per a les dues)"},
    {"id":15,"pol":"jest piƒôtna≈õcie po drugiej","cat":"s√≥n les dues i quinze"},
    {"id":16,"pol":"jest za piƒôtna≈õcie trzecia","cat":"s√≥n tres quarts de tres (literal: quinze abans de les tres)"},
    {"id":17,"pol":"rano","cat":"al mat√≠"},
    {"id":18,"pol":"po po≈Çudniu","cat":"a la tarda"},
    {"id":19,"pol":"wieczorem","cat":"al vespre"},
    {"id":20,"pol":"w nocy","cat":"a la nit"},
    {"id":21,"pol":"punktualnie","cat":"puntual"},
    {"id":22,"pol":"sp√≥≈∫niony","cat":"tard (arribar tard)"},
    {"id":23,"pol":"zaraz","cat":"ara mateix / de seguida"}
],
  pagaments: [
    {"id":1,"pol":"rachunek","cat":"compte / factura"},
    {"id":2,"pol":"paragon","cat":"tiquet"},
    {"id":3,"pol":"faktura","cat":"factura"},
    {"id":4,"pol":"got√≥wka","cat":"efectiu"},
    {"id":5,"pol":"karta","cat":"targeta (banc√†ria)"},
    {"id":6,"pol":"p≈Çatno≈õƒá kartƒÖ","cat":"pagament amb targeta"},
    {"id":7,"pol":"p≈Çatno≈õƒá got√≥wkƒÖ","cat":"pagament en efectiu"},
    {"id":8,"pol":"numer PIN","cat":"codi PIN"},
    {"id":9,"pol":"terminal","cat":"dat√†fon"},
    {"id":10,"pol":"reszta","cat":"canvi"},
    {"id":11,"pol":"czy mogƒô zap≈Çaciƒá kartƒÖ?","cat":"puc pagar amb targeta?"},
    {"id":12,"pol":"czy przyjmujecie karty?","cat":"accepteu targetes?"},
    {"id":13,"pol":"czy mogƒô zap≈Çaciƒá got√≥wkƒÖ?","cat":"puc pagar en efectiu?"},
    {"id":14,"pol":"czy mogƒô prosiƒá rachunek?","cat":"em pot portar el compte?"},
    {"id":15,"pol":"ile to kosztuje?","cat":"quant costa aix√≤?"},
    {"id":16,"pol":"cena","cat":"preu"},
    {"id":17,"pol":"w sumie","cat":"en total"},
    {"id":18,"pol":"zni≈ºka","cat":"descompte"},
    {"id":19,"pol":"gratis","cat":"gratu√Øt"},
    {"id":20,"pol":"op≈Çata","cat":"quota / c√†rrec"},
    {"id":21,"pol":"czy napiwek jest wliczony?","cat":"la propina est√† inclosa?"},
    {"id":22,"pol":"napiwek","cat":"propina"}
],


  pronoms_personals: [
    {"id":1,"pol":"ja","cat":"jo"},
    {"id":2,"pol":"ty","cat":"tu"},
    {"id":3,"pol":"on","cat":"ell"},
    {"id":4,"pol":"ona","cat":"ella"},
    {"id":5,"pol":"ono","cat":"ell/ella (neutre, coses o animals)"},
    {"id":6,"pol":"my","cat":"nosaltres"},
    {"id":7,"pol":"wy","cat":"vosaltres"},
    {"id":8,"pol":"oni","cat":"ells (mascul√≠ plural)"},
    {"id":9,"pol":"one","cat":"elles (plural femen√≠ o coses)"}
],
verb_ser: [
    // Present
    {"id":1,"pol":"ja jestem","cat":"jo s√≥c"},
    {"id":2,"pol":"ty jeste≈õ","cat":"tu ets"},
    {"id":3,"pol":"on jest","cat":"ell √©s"},
    {"id":4,"pol":"ona jest","cat":"ella √©s"},
    {"id":5,"pol":"my jeste≈õmy","cat":"nosaltres som"},
    {"id":6,"pol":"wy jeste≈õcie","cat":"vosaltres sou"},
    {"id":7,"pol":"oni sƒÖ","cat":"ells s√≥n"},
    {"id":8,"pol":"one sƒÖ","cat":"elles s√≥n"},

    // Passat (singular)
    {"id":9,"pol":"ja by≈Çem","cat":"jo era / vaig ser (mascul√≠)"},
    {"id":10,"pol":"ja by≈Çam","cat":"jo era / vaig ser (femen√≠)"},
    {"id":11,"pol":"ty by≈Çe≈õ","cat":"tu eres (mascul√≠)"},
    {"id":12,"pol":"ty by≈Ça≈õ","cat":"tu eres (femen√≠)"},
    {"id":13,"pol":"on by≈Ç","cat":"ell era / va ser"},
    {"id":14,"pol":"ona by≈Ça","cat":"ella era / va ser"},

    // Futur (singular i plural)
    {"id":15,"pol":"ja bƒôdƒô","cat":"jo ser√©"},
    {"id":16,"pol":"ty bƒôdziesz","cat":"tu ser√†s"},
    {"id":17,"pol":"on bƒôdzie","cat":"ell ser√†"},
    {"id":18,"pol":"ona bƒôdzie","cat":"ella ser√†"},
    {"id":19,"pol":"my bƒôdziemy","cat":"nosaltres serem"},
    {"id":20,"pol":"wy bƒôdziecie","cat":"vosaltres sereu"},
    {"id":21,"pol":"oni bƒôdƒÖ","cat":"ells seran"},
    {"id":22,"pol":"one bƒôdƒÖ","cat":"elles seran"}
],

  demostratius: [
    {"id":1,"pol":"ten","cat":"aquest (mascul√≠)"},
    {"id":2,"pol":"ta","cat":"aquesta (femen√≠)"},
    {"id":3,"pol":"to","cat":"aix√≤ / aquest (neutre)"},
    {"id":4,"pol":"ci","cat":"aquests (mascul√≠ plural)"},
    {"id":5,"pol":"te","cat":"aquestes (plural)"},
    {"id":6,"pol":"tamten","cat":"aquell (mascul√≠)"},
    {"id":7,"pol":"tamta","cat":"aquella (femen√≠)"},
    {"id":8,"pol":"tamto","cat":"all√≤ / aquell (neutre)"},
    {"id":9,"pol":"tamci","cat":"aquells (mascul√≠ plural)"},
    {"id":10,"pol":"tamte","cat":"aquelles (plural)"},
    {"id":11,"pol":"tutaj","cat":"aqu√≠"},
    {"id":12,"pol":"tam","cat":"all√†"},
    {"id":13,"pol":"tutajten","cat":"aquest d‚Äôaqu√≠ (mascul√≠)"},
    {"id":14,"pol":"tamtenten","cat":"aquell d‚Äôall√† (mascul√≠)"},
    {"id":15,"pol":"to tutaj","cat":"aix√≤ d‚Äôaqu√≠"},
    {"id":16,"pol":"tamto tam","cat":"all√≤ d‚Äôall√†"}
],

  possessius: [
    {"id":1,"pol":"m√≥j","cat":"el meu"},
    {"id":2,"pol":"moja","cat":"la meva"},
    {"id":3,"pol":"moje","cat":"el meu (neutre)"},
    {"id":4,"pol":"tw√≥j","cat":"el teu"},
    {"id":5,"pol":"twoja","cat":"la teva"},
    {"id":6,"pol":"twoje","cat":"el teu (neutre)"},
    {"id":7,"pol":"jego","cat":"el seu (d‚Äôell)"},
    {"id":8,"pol":"jej","cat":"el seu (d‚Äôella)"},
    {"id":9,"pol":"nasz","cat":"el nostre"},
    {"id":10,"pol":"nasza","cat":"la nostra"},
    {"id":11,"pol":"wasz","cat":"el vostre"},
    {"id":12,"pol":"wasza","cat":"la vostra"},
    {"id":13,"pol":"ich","cat":"el seu (d‚Äôells/d‚Äôelles)"}
],
preposicions: [
    {"id":1,"pol":"jogurt z miodem","cat":"iogurt amb mel"},
    {"id":2,"pol":"jogurt bez miodu","cat":"iogurt sense mel"},
    {"id":3,"pol":"jogurt dla dziecka","cat":"iogurt per a un nen"}, 
    {"id":4,"pol":"jogurt i mi√≥d","cat":"iogurt i mel"},
    {"id":5,"pol":"jogurt lub mi√≥d","cat":"iogurt o mel"},
    {"id":6,"pol":"jogurt do deseru","cat":"iogurt per a postres"},
    {"id":7,"pol":"jogurt od rana","cat":"iogurt des de bon mat√≠"},
    {"id":8,"pol":"jogurt w szklance","cat":"iogurt dins un got"},
    {"id":9,"pol":"jogurt na miodzie","cat":"iogurt sobre mel"},
    {"id":10,"pol":"jogurt po miodzie","cat":"iogurt despr√©s de la mel"},
    {"id":11,"pol":"jogurt przed miodem","cat":"iogurt abans de la mel"},
    {"id":12,"pol":"jogurt przy miodzie","cat":"iogurt a prop de la mel"},
    {"id":13,"pol":"jogurt pod miodem","cat":"iogurt sota la mel"},
    {"id":14,"pol":"jogurt nad miodem","cat":"iogurt sobre la mel"}
],




apats_serveis: [
    {"id":1,"pol":"≈õniadanie","cat":"esmorzar"},
    {"id":2,"pol":"obiad","cat":"dinar"},
    {"id":3,"pol":"kolacja","cat":"sopar"},
    {"id":4,"pol":"bufet","cat":"bufet lliure"},
    {"id":5,"pol":"restauracja","cat":"restaurant"},
    {"id":6,"pol":"menu","cat":"men√∫"},
    {"id":7,"pol":"napoje","cat":"begudes"},
    {"id":8,"pol":"przystawka","cat":"entrant"},
    {"id":9,"pol":"drugie danie","cat":"segon plat"},
    {"id":10,"pol":"deser","cat":"postres"},
    {"id":11,"pol":"owoc","cat":"fruita"},
    {"id":12,"pol":"rachunek","cat":"compte (factura)"},
    {"id":13,"pol":"kelner","cat":"cambrer"},
    {"id":14,"pol":"samoobs≈Çuga","cat":"self-service"},
    {"id":15,"pol":"rezerwowany stolik","cat":"taula reservada"},
    {"id":16,"pol":"rezerwacja wymagana","cat":"cal reserva"}
],

apats_detalls: [
    {"id":1,"pol":"otwarte","cat":"obert"},
    {"id":2,"pol":"zamkniƒôte","cat":"tancat"},
    {"id":3,"pol":"toaleta","cat":"lavabo"},
    {"id":4,"pol":"mƒô≈ºczy≈∫ni","cat":"homes"},
    {"id":5,"pol":"kobiety","cat":"dones"},
    {"id":6,"pol":"wej≈õcie","cat":"entrada"},
    {"id":7,"pol":"wyj≈õcie","cat":"sortida"},
    {"id":8,"pol":"sezonowe","cat":"de temporada"},
    {"id":9,"pol":"wiejska","cat":"de pag√®s"},
    {"id":10,"pol":"wƒôdzonej","cat":"fumat"},
    {"id":11,"pol":"sos","cat":"salsa"},
    {"id":12,"pol":"domowa","cat":"casolana"},
    {"id":13,"pol":"bezglutenowe","cat":"sense gluten"},
    {"id":14,"pol":"piklowana","cat":"adobat"},
    {"id":15,"pol":"olej","cat":"oli"},
    {"id":16,"pol":"ocet","cat":"vinagre"},
    {"id":17,"pol":"s√≥l","cat":"sal"},
    {"id":18,"pol":"wieprzowina","cat":"porc"},
    {"id":19,"pol":"wo≈Çowego","cat":"vedella"},
    {"id":20,"pol":"kurczak","cat":"pollastre"},
    {"id":21,"pol":"dania","cat":"plat"},
    {"id":22,"pol":"≈Çy≈ºka","cat":"cullera"},
    {"id":23,"pol":"widelec","cat":"forquilla"},
    {"id":24,"pol":"n√≥≈º","cat":"ganivet"},
    {"id":25,"pol":"szk≈Ço","cat":"got"}
],


bistro_dolc: [
    {"id":1,"pol":"croissant","cat":"croissant"},
    {"id":2,"pol":"brioszka","cat":"brioix"},
    {"id":3,"pol":"konfitura","cat":"confitura"},
    {"id":4,"pol":"mi√≥d","cat":"mel"},
    {"id":5,"pol":"mas≈Ço","cat":"mantega"},
    {"id":6,"pol":"pomara≈Ñcza brul√©e","cat":"taronja cremada"},
    {"id":7,"pol":"d≈ºem","cat":"melmelada"},
    {"id":8,"pol":"owoce","cat":"fruites"},
    {"id":9,"pol":"orzechy w≈Çoskie","cat":"nous"},
    {"id":10,"pol":"orzechy arachidowe","cat":"cacauets"},
    {"id":11,"pol":"syrop klonowy","cat":"xarop d‚Äôaur√≥"},
    {"id":12,"pol":"s≈Çony karmel","cat":"caramel salat"},
    {"id":13,"pol":"cukier","cat":"sucre"},
    {"id":14,"pol":"p≈Çatki","cat":"cereals d'esmorzar"},
    {"id":15,"pol":"owsiane","cat":"civada"},
    {"id":16,"pol":"jogurt","cat":"iogurt"},
    {"id":17,"pol":"bakalie","cat":"fruita seca i deshidratada"},
    {"id":18,"pol":"kremowy serek","cat":"formatge crem√≥s (dol√ß o amb vainilla)"},
    {"id":19,"pol":"mleko","cat":"llet"}
],

bistro_salat: [
    {"id":1,"pol":"jajecznica","cat":"ous remenats"},
    {"id":2,"pol":"jaja sadzone","cat":"ous ferrats"},
    {"id":3,"pol":"frankfurterki","cat":"salsitxes tipus Frankfurt"},
    {"id":4,"pol":"szynka","cat":"pernil"},
    {"id":5,"pol":"twar√≥g","cat":"mat√≥ / formatge fresc"},
    {"id":6,"pol":"ser","cat":"formatge"},
    {"id":7,"pol":"czosnkiem","cat":"all"},
    {"id":8,"pol":"sk√≥rkƒÖ cytrynowƒÖ","cat":"pell de llimona"},
    {"id":9,"pol":"sa≈Çatka","cat":"amanida"},
    {"id":10,"pol":"og√≥rk√≥w","cat":"cogombre"},
    {"id":11,"pol":"koperkiem","cat":"anet"},
    {"id":12,"pol":"warzywa","cat":"verdures"},
    {"id":13,"pol":"oliwa","cat":"oli"},
    {"id":14,"pol":"papryki","cat":"pebrot"},
    {"id":15,"pol":"focaccia","cat":"coca de pa"},
    {"id":16,"pol":"pieczywo","cat":"pa (assortit)"},
    {"id":17,"pol":"kaszanka","cat":"botifarra negra"},
    {"id":18,"pol":"fasola","cat":"mongetes"},
    {"id":19,"pol":"boczek wƒôdzony","cat":"cansalada"},
    {"id":20,"pol":"hash browns","cat":"truita de patata (hamburguesa)"},
    {"id":21,"pol":"pomidor","cat":"tom√†quet"},
    {"id":22,"pol":"pastrami","cat":"llom (embotit)"},
    {"id":23,"pol":"przepi√≥rcze jaja","cat":"ous de guatlla"},
    {"id":24,"pol":"awokado","cat":"alvocat"},
    {"id":25,"pol":"cebula","cat":"ceba"},
    {"id":26,"pol":"pikantny majonez","cat":"maionesa picant"},
    {"id":27,"pol":"oliwki","cat":"olives"},
    {"id":28,"pol":"suszone pomidory","cat":"tom√†quets secs"},
    {"id":29,"pol":"zio≈Ça","cat":"herbes"},
    {"id":30,"pol":"szpinak","cat":"espinacs"},
    {"id":31,"pol":"pieczarkami","cat":"xampinyons"},
    {"id":32,"pol":"rukola","cat":"r√∫cula"},
    {"id":33,"pol":"sos","cat":"salsa"},
    {"id":34,"pol":"sa≈Çata","cat":"enciam"},
    {"id":35,"pol":"szczypiorek","cat":"cibulet"},
    {"id":36,"pol":"pra≈ºona cebula","cat":"ceba fregida cruixent"}
]



};

let frasesActuals = TEMES.colors;
let encerts = 0;
let selectedPol = null;
let currentAttempts = {};

function canviaTema() {
  frasesActuals = TEMES[document.getElementById("tema").value];
  novaRonda();
}

function barreja(array) {
  return array.slice().sort(() => Math.random() - 0.5);
}

function speakPolish(text) {
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = "pl-PL";
  speechSynthesis.cancel();
  speechSynthesis.speak(utterance);
}

function actualitzaPuntuacio() {
  document.getElementById("score").textContent = `Encerts: ${encerts} / ${TOTAL_PER_RONDA}`;
}

function novaRonda() {
  const grogues = [];
  document.querySelectorAll(".fixed-pol").forEach(el => {
    grogues.push(parseInt(el.dataset.id));
  });

  const restants = frasesActuals.filter(f => !grogues.includes(f.id));
  const seleccionades = [];

  grogues.forEach(id => {
    const paraula = frasesActuals.find(f => f.id === id);
    if (paraula) seleccionades.push(paraula);
  });

  const addicionals = barreja(restants).slice(0, TOTAL_PER_RONDA - seleccionades.length);
  seleccionades.push(...addicionals);

  currentAttempts = {};
  generaExercici(seleccionades);
  dibuixaLinies();
}

function netejaErrors() {
  document.querySelectorAll(".incorrect-pol, .incorrect-cat").forEach(el => {
    el.classList.remove("incorrect-pol", "incorrect-cat");
  });
}

function mouAlTop(element) {
  const parent = element.parentNode;
  parent.insertBefore(element, parent.firstChild);
}

function dibuixaLinies() {
  const svg = document.querySelector(".match-lines");
  svg.innerHTML = "";
  const polContainer = document.getElementById("polones");
  const catContainer = document.getElementById("catala");

  const matchedPol = polContainer.querySelectorAll(".matched, .fixed-pol");
  matchedPol.forEach(pol => {
    const polId = pol.dataset.id;
    const cat = catContainer.querySelector(`.matched[data-id="${polId}"], .fixed-cat[data-id="${polId}"]`);
    if (cat) {
      const polRect = pol.getBoundingClientRect();
      const catRect = cat.getBoundingClientRect();
      const containerRect = svg.getBoundingClientRect();

      const x1 = polRect.right - containerRect.left;
      const y1 = polRect.top + polRect.height / 2 - containerRect.top;
      const x2 = catRect.left - containerRect.left;
      const y2 = catRect.top + catRect.height / 2 - containerRect.top;

      const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
      line.setAttribute("x1", x1);
      line.setAttribute("y1", y1);
      line.setAttribute("x2", x2);
      line.setAttribute("y2", y2);
      line.setAttribute("stroke", "#666");
      line.setAttribute("stroke-width", "2");
      svg.appendChild(line);
    }
  });
}

function generaExercici(frases) {
  const polContainer = document.getElementById("polones");
  const catContainer = document.getElementById("catala");
  polContainer.innerHTML = "";
  catContainer.innerHTML = "";
  encerts = 0;
  selectedPol = null;
  actualitzaPuntuacio();

  const polFrases = barreja(frases);
  const catFrases = barreja(frases);

  polFrases.forEach(f => {
    const div = document.createElement("div");
    div.className = "item";
    div.dataset.id = f.id;
    div.textContent = f.pol;

    div.addEventListener("click", () => {
      speakPolish(f.pol); // ‚úÖ Sempre pronuncia
      if (div.classList.contains("matched") || div.classList.contains("fixed-pol")) return;
      netejaErrors();
      document.querySelectorAll("#polones .item").forEach(el => el.classList.remove("selected"));
      div.classList.add("selected");
      selectedPol = div;
    });

    polContainer.appendChild(div);
  });

  catFrases.forEach(f => {
    const div = document.createElement("div");
    div.className = "item";
    div.dataset.id = f.id;
    div.textContent = f.cat;

    div.addEventListener("click", () => {
      if (!selectedPol) return;
      if (div.classList.contains("matched") || div.classList.contains("fixed-cat")) return;

      const polId = selectedPol.dataset.id;
      const catId = div.dataset.id;

      if (polId === catId) {
        if (currentAttempts[polId] && currentAttempts[polId].attempts > 0) {
          selectedPol.classList.add("fixed-pol");
          div.classList.add("fixed-cat");
        } else {
          selectedPol.classList.add("matched");
          div.classList.add("matched");
          encerts++;
          actualitzaPuntuacio();
        }
        mouAlTop(selectedPol);
        mouAlTop(div);
        dibuixaLinies();
      } else {
        selectedPol.classList.add("incorrect-pol");
        div.classList.add("incorrect-cat");
        if (!currentAttempts[polId]) currentAttempts[polId] = { attempts: 0 };
        currentAttempts[polId].attempts++;
      }

      selectedPol.classList.remove("selected");
      selectedPol = null;
    });

    catContainer.appendChild(div);
  });
}

window.addEventListener("resize", dibuixaLinies);
window.onload = () => canviaTema();
</script>
</body>
</html>
